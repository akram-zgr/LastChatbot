{% extends "base.html" %}

{% block title %}Chat - Algerian Universities AI Assistant{% endblock %}

{% block content %}
<div class="chat-container">
    <!-- Sidebar -->
    <div class="chat-sidebar">
        <div class="sidebar-header">
            <div id="universityName" style="font-size: 1.2em; opacity: 0.8; margin-bottom: 5px;text-align: center;padding: 10px 10px;">Loading...</div>
            <button id="newChatBtn" class="btn btn-secondary">+ New Chat</button>
        </div>
        
        <div class="chat-list" id="chatList">
            <!-- Chat history will be loaded here -->
        </div>
        
        <div class="sidebar-footer">
            <div class="user-info" id="userInfo"></div>
            <button id="logoutBtn" class="btn btn-outline">Logout</button>
        </div>
    </div>
    
    <!-- Main Chat Area -->
    <div class="chat-main">
        <div class="chat-header" id="chatHeader">
            <div class="chat-header-content">
                <h3 id="chatTitle">Select a chat or start a new conversation</h3>
                <!-- Settings button with adaptive icon color -->
                <button id="settingsBtn" class="btn-icon" title="Settings" style="background:none; color: #7c3aed; border:none; cursor:pointer; padding: 8px;">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
</button>

            </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <h2>Welcome to Algerian Universities AI Assistant</h2>
                <p>How can I assist you today?</p>
            </div>
        </div>
        
        <div class="chat-input-container">
            <form id="messageForm" class="chat-input-form">
                <input 
                    type="text" 
                    id="messageInput" 
                    placeholder="Type your message here..." 
                    autocomplete="off"
                    disabled
                >
                <button type="submit" class="btn btn-primary" disabled>
                    <span>Send</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Settings Panel -->
    <div id="settingsPanel" class="settings-panel">
        <div class="settings-overlay"></div>
        <div class="settings-content">
            <div class="settings-header">
                <h2>Settings</h2>
                <button class="settings-close" id="closeSettings">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <div class="settings-body">
                <!-- Profile Section -->
                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        Profile Settings
                    </h3>
                    <div class="settings-item">
                        <label>Full Name</label>
                        <input type="text" id="profileName" placeholder="Enter your name">
                    </div>
                    <div class="settings-item">
                        <label>Email</label>
                        <input type="email" id="profileEmail" placeholder="your@email.com" readonly>
                    </div>
                    <div class="settings-item">
                        <label>Department</label>
                        <input type="text" id="profileDepartment" placeholder="Your department">
                    </div>
                    <button class="btn btn-primary btn-small" id="saveProfile">Save Profile</button>
                </div>

                <!-- Appearance Section -->
                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        Appearance
                    </h3>
                    <div class="settings-item">
                        <label>Theme</label>
                        <div class="theme-selector">
                            <button class="theme-option active" data-theme="dark">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                                Dark
                            </button>
                            <button class="theme-option" data-theme="light">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                </svg>
                                Light
                            </button>
                        </div>
                    </div>
                    <div class="settings-item">
                        <label>Font Size</label>
                        <select id="fontSize">
                            <option value="small">Small</option>
                            <option value="medium" selected>Medium</option>
                            <option value="large">Large</option>
                        </select>
                    </div>
                </div>

                <!-- Language Section -->
                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="2" y1="12" x2="22" y2="12"></line>
                            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                        </svg>
                        Language
                    </h3>
                    <div class="settings-item">
                        <label>Interface Language</label>
                        <select id="language">
                            <option value="en">English</option>
                            <option value="ar">العربية (Arabic)</option>
                            <option value="fr">Français (French)</option>
                            <option value="es">Español (Spanish)</option>
                        </select>
                    </div>
                </div>

                <!-- AI Settings Section -->
                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                        </svg>
                        AI Settings
                    </h3>
                    <div class="settings-item">
                        <label>Response Style</label>
                        <select id="responseStyle">
                            <option value="concise">Concise</option>
                            <option value="balanced" selected>Balanced</option>
                            <option value="detailed">Detailed</option>
                        </select>
                    </div>
                    <div class="settings-item">
                        <label>Creativity Level</label>
                        <input type="range" id="creativity" min="0" max="100" value="70" class="range-slider">
                        <div class="range-labels">
                            <span>Precise</span>
                            <span id="creativityValue">70%</span>
                            <span>Creative</span>
                        </div>
                    </div>
                    <div class="settings-item toggle-item">
                        <div>
                            <label>Code Highlighting</label>
                            <p class="setting-description">Enable syntax highlighting in code responses</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="codeHighlight" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-item toggle-item">
                        <div>
                            <label>Auto-Save Conversations</label>
                            <p class="setting-description">Automatically save chat history</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="autoSave" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Privacy Section -->
                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        Privacy & Data
                    </h3>
                    <div class="settings-item toggle-item">
                        <div>
                            <label>Data Collection</label>
                            <p class="setting-description">Allow usage data for improving AI</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="dataCollection" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="settings-item">
                        <button class="btn btn-outline btn-small" id="exportData">Export Chat History</button>
                        <button class="btn btn-outline btn-small btn-danger" id="clearHistory">Clear All Chats</button>
                    </div>
                </div>

                <!-- About Section -->
                <div class="settings-section">
                    <h3 class="settings-section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                        About
                    </h3>
                    <div class="settings-item">
                        <p class="setting-info">
                            <strong>Batna2 University Chatbot</strong><br>
                            Version 1.0.0<br>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/chat.css') }}">
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/chat.js') }}"></script>
{% endblock %}